/*
 * Wander by Grant Skinner on 15-02-11.
 *
* Copyright (c) 2011 Grant Skinner
*
* Permission is hereby granted, free of charge, to any person
* obtaining a copy of this software and associated documentation
* files (the "Software"), to deal in the Software without
* restriction, including without limitation the rights to use,
* copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the
* Software is furnished to do so, subject to the following
* conditions:
*
* The above copyright notice and this permission notice shall be
* included in all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
* OTHER DEALINGS IN THE SOFTWARE.
*/
/*
* Rnd (JS) by Grant Skinner. June 18, 2011
* based on Rnd (AS3) by Grant Skinner. Dec 5, 2008
* Visit http://github.com/gskinner for documentation, updates and examples.
*
*
* Copyright (c) 2011 Grant Skinner
*
* Permission is hereby granted, free of charge, to any person
* obtaining a copy of this software and associated documentation
* files (the "Software"), to deal in the Software without
* restriction, including without limitation the rights to use,
* copy, modify, merge, publish, distribute, sublicense, and/or sell
* copies of the Software, and to permit persons to whom the
* Software is furnished to do so, subject to the following
* conditions:
*
* The above copyright notice and this permission notice shall be
* included in all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
* OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
* HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
* WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
* FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
* OTHER DEALINGS IN THE SOFTWARE.
*/
!function(){"use strict";var t=Math.PI,i=t/180,n=function(t){this.reset(t)},s=n.prototype;s.update=function(){if(!this.stopped){var t,n=this.x,s=this.y,o=this.rotation,a=this.follow,r=this.target;this.oldX=n,this.oldY=s;var h=this.oldRotation=o;if(null!=this.life&&!this.life--)return void(this.stopped=!0);var e=a?a.x:this.targetX,l=a?a.y:this.targetY;if((null!=(t=this.strengthPos)||this.radius)&&(null!=e||null!=l)){null==e&&(e=n),null==l&&(l=s);var u=this.radius,d=e-n,f=l-s,v=Math.sqrt(d*d+f*f),p=Math.atan2(f,d);if(v<this.speed&&this.stopAtPos)return this.x=n,this.y=s,void(this.stopped=!0);if(u>0){var c=this.center||0,g=Math.min(1,(v-c)/(u-c));g>0&&(t+=(1-t)*g*g)}o+=this.getRotationDelta(o,p/i)*t}if(o+=Rnd(180*-this.varyRotation,180*this.varyRotation),(t=this.strengthRotation)&&null!=this.targetRotation&&(o+=this.getRotationDelta(o,this.targetRotation)*t),null!=(t=this.limitRotation)){var R=o-h;Math.abs(R)>t&&(o=h+t*(0>R?-1:1))}var y=this.speed;y+=Rnd(-y*this.varySpeed,y*this.varySpeed),this.x=n+=Math.cos(o*i)*y,this.y=s+=Math.sin(o*i)*y,this.rotation=o,r&&(r.x=n,r.y=s,r.rotation=o)}},s.handleEvent=function(t){"tick"==t.type&&this.update()},s.reset=function(t){var i=t&&t.target;if(i?(this.x=i.x,this.y=i.y,this.rotation=i.rotation):this.x=this.y=this.rotation=0,this.oldX=this.x,this.oldY=this.y,this.oldRotation=this.rotation,this.targetX=this.targetY=this.targetRotation=null,this.follow=null,this.radius=this.center=0,this.strengthPos=this.strengthRotation=0,this.speed=0,this.varySpeed=this.varyRotation=null,this.limitRotation=null,this.stopped=this.stopAtPos=!1,this.life=null,t)for(var n in t)this[n]=t[n]},s.getRotationDelta=function(t,i){var n=(i-t)%360;return n>180?n-=360:-180>n?n+=360:n},window.Wander=n}(),function(t){function i(t,n){return isNaN(n)&&(n=t,t=0),isNaN(n)&&(n=1),i.random()*(n-t)+t}i.random=function(){return Math.random()},i["float"]=i,i["boolean"]=function(t){return isNaN(t)&&(t=.5),i.random()<t},i.sign=function(t){return isNaN(t)&&(t=.5),i.random()<t?1:-1},i.bit=function(t){return isNaN(t)&&(t=.5),i.random()<t?1:0},i.integer=function(t,n){return isNaN(n)&&(n=t,t=0),Math.floor(i["float"](t,n))},i.shuffle=function(t){for(var n=t.length,s=0;n>s;s++){var o=n*i.random()|0;if(o!=s){var a=t[o];t[o]=t[s],t[s]=a}}return t},i.item=function(t){return t[t.length*i.random()|0]},t.Rnd=i}(window);

